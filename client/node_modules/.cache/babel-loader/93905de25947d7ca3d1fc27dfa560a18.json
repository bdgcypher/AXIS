{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/bdgcy/Axis/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/bdgcy/Axis/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:/Users/bdgcy/Axis/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/bdgcy/Axis/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/bdgcy/Axis/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import Cookies from'universal-cookie';import axios from'axios';import LoginImg from\"../assets/login_img.svg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var cookies=new Cookies();var initialState={fullName:'',username:'',password:'',confirmPassword:'',avatarURL:'',phoneNumber:''};var Auth=function Auth(){var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isSignup=_useState4[0],setIsSignup=_useState4[1];var handleChange=function handleChange(e){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value)));};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var fullName,username,password,phoneNumber,avatarURL,URL,_yield$axios$post,_yield$axios$post$dat,token,userId,hashedPassword;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();fullName=form.fullName,username=form.username,password=form.password,phoneNumber=form.phoneNumber,avatarURL=form.avatarURL;URL='https://axis-dyoxpbbvl-bdgcypher.vercel.app/auth';_context.next=5;return axios.post(\"\".concat(URL,\"/\").concat(isSignup?'signup':'login'),{username:username,password:password,fullName:form.fullName,phoneNumber:phoneNumber,avatarURL:avatarURL});case 5:_yield$axios$post=_context.sent;_yield$axios$post$dat=_yield$axios$post.data;token=_yield$axios$post$dat.token;userId=_yield$axios$post$dat.userId;hashedPassword=_yield$axios$post$dat.hashedPassword;cookies.set('token',token);cookies.set('username',username);cookies.set('fullName',fullName);cookies.set('userId',userId);if(isSignup){cookies.set('phoneNumber',phoneNumber);cookies.set('avatarURL',avatarURL);cookies.set('hashedPassword',hashedPassword);}window.location.reload();case 16:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var switchMode=function switchMode(){setIsSignup(function(prevIsSignup){return!prevIsSignup;});};return/*#__PURE__*/_jsxs(\"div\",{className:\"auth__form-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"auth__form-container_image\",children:/*#__PURE__*/_jsx(\"img\",{src:LoginImg,alt:\"Chat\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"auth__form-container_fields\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth__form-container_fields-content\",children:[/*#__PURE__*/_jsx(\"p\",{children:isSignup?'Sign Up':'Login'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[isSignup&&/*#__PURE__*/_jsx(\"div\",{className:\"auth__form-container_fields-content_input\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"fullName\",placeholder:\"Full Name\",onChange:handleChange,required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"auth__form-container_fields-content_input\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",placeholder:\"Username (what others will see)\",onChange:handleChange,required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"auth__form-container_fields-content_input\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Password\",onChange:handleChange,required:true})}),isSignup&&/*#__PURE__*/_jsx(\"div\",{className:\"auth__form-container_fields-content_input\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"confirmPassword\",placeholder:\"Confirm Password\",onChange:handleChange,required:true})}),isSignup&&/*#__PURE__*/_jsx(\"div\",{className:\"auth__form-container_fields-content_input\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"avatarURL\",placeholder:\"URL for avatar image\",onChange:handleChange})}),isSignup&&/*#__PURE__*/_jsx(\"div\",{className:\"auth__form-container_fields-content_input\",children:/*#__PURE__*/_jsx(\"input\",{type:\"phone\",name:\"phoneNumber\",placeholder:\"Phone Number\",onChange:handleChange,required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"auth__form-container_fields-content_button\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:isSignup?\"Register\":\"Sign in\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"auth__form-container_fields-account\",children:/*#__PURE__*/_jsxs(\"p\",{children:[isSignup?\"Already have an account?\":\"Don't have an account?\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{onClick:switchMode,children:isSignup?\"Login\":\"Sign Up\"})]})})]})})]});};export default Auth;","map":{"version":3,"sources":["C:/Users/bdgcy/Axis/client/src/components/Auth.js"],"names":["React","useState","Cookies","axios","cookies","initialState","fullName","username","password","confirmPassword","avatarURL","phoneNumber","Auth","form","setForm","isSignup","setIsSignup","handleChange","e","target","name","value","handleSubmit","preventDefault","URL","post","data","token","userId","hashedPassword","set","window","location","reload","switchMode","prevIsSignup","LoginImg"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\r\nimport Cookies from 'universal-cookie'\r\nimport axios from 'axios'\r\n\r\nimport LoginImg from '../assets/login_img.svg'\r\n\r\nconst cookies = new Cookies();\r\n\r\nconst initialState = {\r\n    fullName: '',\r\n    username: '',\r\n    password: '',\r\n    confirmPassword: '',\r\n    avatarURL: '',\r\n    phoneNumber: '',\r\n}\r\n\r\nconst Auth = () => {\r\n\r\n    const [form, setForm] = useState(initialState);\r\n    const [isSignup, setIsSignup] = useState(false);\r\n\r\n    const handleChange = (e) => {\r\n        setForm({ ...form, [e.target.name]: e.target.value });\r\n    }\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        const { fullName, username, password, phoneNumber, avatarURL } = form;\r\n\r\n        const URL = 'https://axis-dyoxpbbvl-bdgcypher.vercel.app/auth';\r\n\r\n        const { data: { token, userId, hashedPassword } } = await axios.post(`${URL}/${isSignup ? 'signup' : 'login'}`, {\r\n            username, password, fullName: form.fullName, phoneNumber, avatarURL,\r\n        });\r\n\r\n        cookies.set('token', token);\r\n        cookies.set('username', username);\r\n        cookies.set('fullName', fullName);\r\n        cookies.set('userId', userId);\r\n\r\n        if (isSignup) {\r\n            cookies.set('phoneNumber', phoneNumber);\r\n            cookies.set('avatarURL', avatarURL);\r\n            cookies.set('hashedPassword', hashedPassword);\r\n        }\r\n\r\n        window.location.reload();\r\n    }\r\n\r\n    const switchMode = () => {\r\n        setIsSignup((prevIsSignup) => !prevIsSignup);\r\n    }\r\n\r\n    return (\r\n        <div className=\"auth__form-container\">\r\n            <div className=\"auth__form-container_image\">\r\n                <img src={LoginImg} alt=\"Chat\" />\r\n            </div>\r\n            <div className=\"auth__form-container_fields\">\r\n                <div className=\"auth__form-container_fields-content\">\r\n                    <p>{isSignup ? 'Sign Up' : 'Login'}</p>\r\n                    <form onSubmit={handleSubmit}>\r\n                        {isSignup && (\r\n                            <div className=\"auth__form-container_fields-content_input\">\r\n                                <input type=\"text\" name=\"fullName\" placeholder=\"Full Name\" onChange={handleChange} required />\r\n                            </div>\r\n                        )}\r\n                        <div className=\"auth__form-container_fields-content_input\">\r\n                            <input type=\"text\" name=\"username\" placeholder=\"Username (what others will see)\" onChange={handleChange} required />\r\n                        </div>\r\n                        <div className=\"auth__form-container_fields-content_input\">\r\n                            <input type=\"password\" name=\"password\" placeholder=\"Password\" onChange={handleChange} required />\r\n                        </div>\r\n                        {isSignup && (\r\n                            <div className=\"auth__form-container_fields-content_input\">\r\n                                <input type=\"password\" name=\"confirmPassword\" placeholder=\"Confirm Password\" onChange={handleChange} required />\r\n                            </div>\r\n                        )}\r\n                        {isSignup && (\r\n                            <div className=\"auth__form-container_fields-content_input\">\r\n                                <input type=\"text\" name=\"avatarURL\" placeholder=\"URL for avatar image\" onChange={handleChange} />\r\n                            </div>\r\n                        )}\r\n                        {isSignup && (\r\n                            <div className=\"auth__form-container_fields-content_input\">\r\n                                <input type=\"phone\" name=\"phoneNumber\" placeholder=\"Phone Number\" onChange={handleChange} required />\r\n                            </div>\r\n                        )}\r\n                        <div className=\"auth__form-container_fields-content_button\">\r\n                            <button type=\"submit\">{isSignup ? \"Register\" : \"Sign in\"}</button>\r\n                        </div>\r\n                    </form>\r\n                    <div className=\"auth__form-container_fields-account\">\r\n                        <p>\r\n                            {isSignup ? \"Already have an account?\" : \"Don't have an account?\"}\r\n                            <br />\r\n                            <br />\r\n                            <span onClick={switchMode}>{isSignup ? \"Login\": \"Sign Up\"}</span>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Auth\r\n"]},"metadata":{},"sourceType":"module"}